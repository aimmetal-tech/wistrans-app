# API æ¥å£æ–‡æ¡£

## åŸºç¡€ä¿¡æ¯

- æœåŠ¡å™¨åœ°å€: `http://localhost:8000`
- æ•°æ®æ ¼å¼: JSON
- å­—ç¬¦ç¼–ç : UTF-8

## æ¥å£åˆ—è¡¨

### 1. ç”¨æˆ·æ³¨å†Œæ¥å£

#### æ¥å£è¯´æ˜

ç”¨äºæ–°ç”¨æˆ·æ³¨å†Œè´¦æˆ·

#### æ¥å£åœ°å€

```
POST /user/register
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å           | ç±»å‹   | å¿…å¡« | è¯´æ˜     |
| ---------------- | ------ | ---- | -------- |
| username         | string | æ˜¯   | ç”¨æˆ·å   |
| password         | string | æ˜¯   | å¯†ç      |
| confirm_password | string | æ˜¯   | ç¡®è®¤å¯†ç  |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "username": "example_user",
  "password": "example_password",
  "confirm_password": "example_password"
}
```

#### å“åº”ç»“æœ

| å‚æ•°å   | ç±»å‹   | è¯´æ˜    |
| -------- | ------ | ------- |
| id       | string    | ç”¨æˆ· ID |
| username | string | ç”¨æˆ·å  |

#### å“åº”ç¤ºä¾‹

```json
{
  "id": 89989a21-e21a-4b4a-862f-033a404c0e1c,
  "username": "example_user"
}
```

### 2. ç”¨æˆ·ç™»å½•æ¥å£

#### æ¥å£è¯´æ˜

ç”¨äºå·²æ³¨å†Œç”¨æˆ·ç™»å½•ç³»ç»Ÿ

#### æ¥å£åœ°å€

```
POST /user/login
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å   | ç±»å‹   | å¿…å¡« | è¯´æ˜   |
| -------- | ------ | ---- | ------ |
| username | string | æ˜¯   | ç”¨æˆ·å |
| password | string | æ˜¯   | å¯†ç    |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "username": "example_user",
  "password": "example_password"
}
```

#### å“åº”ç»“æœ

| å‚æ•°å  | ç±»å‹   | è¯´æ˜         |
| ------- | ------ | ------------ |
| message | string | ç™»å½•æ¶ˆæ¯     |
| user    | object | ç”¨æˆ·ä¿¡æ¯å¯¹è±¡ |

user å¯¹è±¡è¯´æ˜

| å‚æ•°å   | ç±»å‹   | è¯´æ˜    |
| -------- | ------ | ------- |
| id       | int    | ç”¨æˆ· ID |
| username | string | ç”¨æˆ·å  |

#### å“åº”ç¤ºä¾‹

```json
{
  "message": "ç™»å½•æˆåŠŸ",
  "user": {
    "id": 1,
    "username": "example_user"
  }
}
```

### 3. ç¿»è¯‘æ¥å£ 

#### æ¥å£è¯´æ˜

ç¿»è¯‘åŠŸèƒ½

#### æ¥å£åœ°å€

```
POST /translate
```


#### è¯·æ±‚å‚æ•°

| å‚æ•°å     | ç±»å‹   | å¿…å¡« | è¯´æ˜                             |
| ---------- | ------ | ---- | -------------------------------- |
| target     | string | æ˜¯   | ç›®æ ‡è¯­è¨€ï¼Œå¦‚ "en" è¡¨ç¤ºç¿»è¯‘ä¸ºè‹±è¯­ |
| segments   | array  | æ˜¯   | è¦ç¿»è¯‘çš„æ–‡æœ¬ç‰‡æ®µåˆ—è¡¨             |
| extra_args | object | å¦   | ç¿»è¯‘çš„é¢å¤–è¦æ±‚ï¼Œå¦‚é£æ ¼ã€èº«ä»½ç­‰   |

##### segments å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹   | å¿…å¡« | è¯´æ˜                                        |
| ------ | ------ | ---- | ------------------------------------------- |
| id     | string | æ˜¯   | ç‰‡æ®µ IDï¼Œç”¨äºæ ‡è¯†ç‰‡æ®µä»¥ä¾¿è¿”å›åˆ°å‰ç«¯ç›¸åº”ä½ç½® |
| text   | string | æ˜¯   | è¦ç¿»è¯‘çš„æ–‡æœ¬å†…å®¹                            |
| model  | string | å¦   | æ¨¡å‹åç§°ï¼Œé»˜è®¤ä¸º "qwen-turbo-latest"            |

##### extra_args å‚æ•°è¯´æ˜

| å‚æ•°å   | ç±»å‹   | å¿…å¡« | è¯´æ˜                                                                 |
| -------- | ------ | ---- | -------------------------------------------------------------------- |
| style    | string | å¦   | ç¿»è¯‘çš„é£æ ¼è¦æ±‚ï¼Œå¦‚"æ¯å¥å¼€å¤´åŠ ä¸Š`ğŸ˜­`ï¼Œåœ¨æ¯å¥ç¿»è¯‘ååŠ ä¸Š`ğŸ˜Š`"          |
| identity | string | å¦   | ç¿»è¯‘ä¸“å®¶çš„èº«ä»½ï¼Œå¯é€‰å€¼ï¼š"é€šç”¨ä¸“å®¶"ã€"å­¦æœ¯è®ºæ–‡ç¿»è¯‘å¸ˆ"ã€"æ„è¯‘ä½œå®¶"ã€"ç¨‹åºä¸“å®¶"ã€"å¤ä»Šä¸­å¤–ç¿»è¯‘å¸ˆ" |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "target": "en",
  "segments": [
    {
      "id": "segment1",
      "text": "è¿™æ˜¯è¦ç¿»è¯‘çš„æ–‡æœ¬"
    },
    {
      "id": "segment2",
      "text": "è¿™æ˜¯å¦ä¸€æ®µè¦ç¿»è¯‘çš„æ–‡æœ¬"
    }
  ],
  "extra_args": {
    "style": "æ¯å¥å¼€å¤´åŠ ä¸Š`ğŸ˜­`ï¼Œåœ¨æ¯å¥ç¿»è¯‘ååŠ ä¸Š`ğŸ˜Š`",
    "identity": "æ„è¯‘ä½œå®¶"
  }
}
````

#### å“åº”ç»“æœ

```json
{
  "translated": "en",
  "segments": [
    {
      "id": "segment1",
      "text": "ğŸ˜­This is the text to be translatedğŸ˜Š"
    },
    {
      "id": "segment2",
      "text": "ğŸ˜­This is another text to be translatedğŸ˜Š"
    }
  ]
}
```

### 4. OCR æ–‡å­—è¯†åˆ«æ¥å£

#### æ¥å£è¯´æ˜

ç”¨äºè¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—å†…å®¹ï¼Œæ”¯æŒå¤šè¯­è¨€æ–‡å­—è¯†åˆ«

#### æ¥å£åœ°å€

```
POST /ocr
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜                                      |
| ------ | ---- | ---- | ----------------------------------------- |
| image  | file | æ˜¯   | å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆJPGã€PNG ç­‰ï¼‰ |

æ³¨æ„ï¼šè¯¥æ¥å£ä½¿ç”¨ form-data æ ¼å¼ä¸Šä¼ æ–‡ä»¶

#### è¯·æ±‚ç¤ºä¾‹

ä½¿ç”¨ curl å‘½ä»¤ç¤ºä¾‹ï¼š

```bash
curl -X POST "http://localhost:8000/ocr" \
  -H "accept: application/json" \
  -H "Content-Type: multipart/form-data" \
  -F "image=@example.jpg"
```

#### å“åº”ç»“æœ

| å‚æ•°å        | ç±»å‹   | è¯´æ˜                                             |
| ------------- | ------ | ------------------------------------------------ |
| detected_text | array  | æ£€æµ‹åˆ°çš„æ–‡æœ¬åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ–‡æœ¬å†…å®¹ã€ç½®ä¿¡åº¦å’Œä½ç½®ä¿¡æ¯ |
| full_text     | string | å®Œæ•´çš„è¯†åˆ«æ–‡æœ¬ï¼Œæ¯è¡Œæ–‡æœ¬ä»¥æ¢è¡Œç¬¦åˆ†éš”             |

##### detected_text å…ƒç´ è¯´æ˜

| å‚æ•°å      | ç±»å‹   | è¯´æ˜                                          |
| ----------- | ------ | --------------------------------------------- |
| text        | string | è¯†åˆ«çš„æ–‡æœ¬å†…å®¹                                |
| confidence  | float  | è¯†åˆ«ç½®ä¿¡åº¦ï¼ŒèŒƒå›´ 0-1ï¼Œè¶Šæ¥è¿‘ 1 è¡¨ç¤ºç½®ä¿¡åº¦è¶Šé«˜ |
| coordinates | array  | æ–‡æœ¬æ¡†åæ ‡ï¼ŒåŒ…å«å››ä¸ªç‚¹çš„åæ ‡ä¿¡æ¯              |

#### å“åº”ç¤ºä¾‹

```json
{
  "detected_text": [
    {
      "text": "ç¤ºä¾‹æ–‡æœ¬",
      "confidence": 0.9875345,
      "coordinates": [
        [10.0, 20.0],
        [100.0, 20.0],
        [100.0, 50.0],
        [10.0, 50.0]
      ]
    }
  ],
  "full_text": "ç¤ºä¾‹æ–‡æœ¬"
}
```

### 5. OCR ç¿»è¯‘æ¥å£

#### æ¥å£è¯´æ˜

ç”¨äºè¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—å†…å®¹å¹¶å°†å…¶ç¿»è¯‘æˆç›®æ ‡è¯­è¨€

#### æ¥å£åœ°å€

```
POST /translate/ocr
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å     | ç±»å‹   | å¿…å¡« | è¯´æ˜                                      |
| ---------- | ------ | ---- | ----------------------------------------- |
| image      | file   | æ˜¯   | å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆJPGã€PNG ç­‰ï¼‰ |
| target     | string | å¦   | ç›®æ ‡è¯­è¨€ï¼Œé»˜è®¤ä¸º"zh"                      |
| model      | string | å¦   | æ¨¡å‹åç§°ï¼Œé»˜è®¤ä¸º"qwen-turbo-latest"       |
| extra_args | object | å¦   | ç¿»è¯‘çš„é¢å¤–è¦æ±‚ï¼Œå¦‚é£æ ¼ã€èº«ä»½ç­‰            |

æ³¨æ„ï¼šè¯¥æ¥å£ä½¿ç”¨ form-data æ ¼å¼ä¸Šä¼ æ–‡ä»¶

##### extra_args å‚æ•°è¯´æ˜

| å‚æ•°å   | ç±»å‹   | å¿…å¡« | è¯´æ˜                                                                                           |
| -------- | ------ | ---- | ---------------------------------------------------------------------------------------------- |
| style    | string | å¦   | ç¿»è¯‘çš„é£æ ¼è¦æ±‚ï¼Œå¦‚"æ¯å¥å¼€å¤´åŠ ä¸Š`ğŸ˜­`ï¼Œåœ¨æ¯å¥ç¿»è¯‘ååŠ ä¸Š`ğŸ˜Š`"                                     |
| identity | string | å¦   | ç¿»è¯‘ä¸“å®¶çš„èº«ä»½ï¼Œå¯é€‰å€¼ï¼š"é€šç”¨ä¸“å®¶"ã€"å­¦æœ¯è®ºæ–‡ç¿»è¯‘å¸ˆ"ã€"æ„è¯‘ä½œå®¶"ã€"ç¨‹åºä¸“å®¶"ã€"å¤ä»Šä¸­å¤–ç¿»è¯‘å¸ˆ" |

#### è¯·æ±‚ç¤ºä¾‹

ä½¿ç”¨ curl å‘½ä»¤ç¤ºä¾‹ï¼š

```bash
curl -X POST "http://localhost:8000/translate/ocr" \
  -H "accept: application/json" \
  -H "Content-Type: multipart/form-data" \
  -F "image=@example.jpg" \
  -F "target=en"
```

#### å“åº”ç»“æœ

| å‚æ•°å          | ç±»å‹   | è¯´æ˜                                             |
| --------------- | ------ | ------------------------------------------------ |
| translated      | string | ç¿»è¯‘çš„ç›®æ ‡è¯­è¨€                                   |
| detected_text   | array  | æ£€æµ‹åˆ°çš„æ–‡æœ¬åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ–‡æœ¬å†…å®¹ã€ç½®ä¿¡åº¦å’Œä½ç½®ä¿¡æ¯ |
| full_text       | string | å®Œæ•´çš„è¯†åˆ«æ–‡æœ¬ï¼Œæ¯è¡Œæ–‡æœ¬ä»¥æ¢è¡Œç¬¦åˆ†éš”             |
| translated_text | string | ç¿»è¯‘åçš„æ–‡æœ¬å†…å®¹                                 |

#### å“åº”ç¤ºä¾‹

```json
{
  "translated": "en",
  "detected_text": [
    {
      "text": "ç¤ºä¾‹æ–‡æœ¬",
      "confidence": 0.9875345,
      "coordinates": [
        [10.0, 20.0],
        [100.0, 20.0],
        [100.0, 50.0],
        [10.0, 50.0]
      ]
    }
  ],
  "full_text": "ç¤ºä¾‹æ–‡æœ¬",
  "translated_text": "Sample text"
}
```

### 6. å•è¯ç¿»è¯‘æ¥å£

#### æ¥å£è¯´æ˜

ä¸“é—¨ç”¨äºå•è¯æˆ–çŸ­è¯­ç¿»è¯‘çš„æ¥å£ï¼Œæ”¯æŒæ‰¹é‡ç¿»è¯‘å¤šä¸ªå•è¯

#### æ¥å£åœ°å€

```
POST /trans-word
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å     | ç±»å‹   | å¿…å¡« | è¯´æ˜                                |
| ---------- | ------ | ---- | ----------------------------------- |
| word       | array  | æ˜¯   | è¦ç¿»è¯‘çš„å•è¯æˆ–çŸ­è¯­åˆ—è¡¨              |
| target     | string | å¦   | ç›®æ ‡è¯­è¨€ï¼Œé»˜è®¤ä¸º"ä¸­æ–‡"              |
| model      | string | å¦   | æ¨¡å‹åç§°ï¼Œé»˜è®¤ä¸º"qwen-turbo-latest" |
| extra_args | object | å¦   | ç¿»è¯‘çš„é¢å¤–è¦æ±‚ï¼Œå¦‚é£æ ¼ã€èº«ä»½ç­‰      |

##### word å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹   | å¿…å¡« | è¯´æ˜                                        |
| ------ | ------ | ---- | ------------------------------------------- |
| id     | string | æ˜¯   | å•è¯ IDï¼Œç”¨äºæ ‡è¯†å•è¯ä»¥ä¾¿è¿”å›åˆ°å‰ç«¯ç›¸åº”ä½ç½® |
| word   | string | æ˜¯   | è¦ç¿»è¯‘çš„å•è¯æˆ–çŸ­è¯­å†…å®¹                      |

##### extra_args å‚æ•°è¯´æ˜

| å‚æ•°å   | ç±»å‹   | å¿…å¡« | è¯´æ˜                                                                                           |
| -------- | ------ | ---- | ---------------------------------------------------------------------------------------------- |
| style    | string | å¦   | ç¿»è¯‘çš„é£æ ¼è¦æ±‚ï¼Œå¦‚"æ¯å¥å¼€å¤´åŠ ä¸Š`ğŸ˜­`ï¼Œåœ¨æ¯å¥ç¿»è¯‘ååŠ ä¸Š`ğŸ˜Š`"                                     |
| identity | string | å¦   | ç¿»è¯‘ä¸“å®¶çš„èº«ä»½ï¼Œå¯é€‰å€¼ï¼š"é€šç”¨ä¸“å®¶"ã€"å­¦æœ¯è®ºæ–‡ç¿»è¯‘å¸ˆ"ã€"æ„è¯‘ä½œå®¶"ã€"ç¨‹åºä¸“å®¶"ã€"å¤ä»Šä¸­å¤–ç¿»è¯‘å¸ˆ" |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "word": [
    {
      "id": "word1",
      "word": "hello"
    },
    {
      "id": "word2",
      "word": "world"
    }
  ],
  "target": "ä¸­æ–‡",
  "extra_args": {
    "identity": "é€šç”¨ä¸“å®¶"
  }
}
```

#### å“åº”ç»“æœ

```json
{
  "translated_word": [
    {
      "id": "word1",
      "word": "ä½ å¥½"
    },
    {
      "id": "word2",
      "word": "ä¸–ç•Œ"
    }
  ]
}
```

### 7. æ–‡æœ¬è½¬è¯­éŸ³æ¥å£

#### æ¥å£è¯´æ˜

ç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³ï¼ˆTTSï¼‰ï¼Œæ”¯æŒç”Ÿæˆ WAV æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶

#### æ¥å£åœ°å€

```
POST /tts
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å     | ç±»å‹   | å¿…å¡« | è¯´æ˜                   |
| ---------- | ------ | ---- | ---------------------- |
| full_text  | string | æ˜¯   | è¦è½¬æ¢ä¸ºè¯­éŸ³çš„å®Œæ•´æ–‡æœ¬ |
| extra_args | object | å¦   | é¢å¤–å‚æ•°ï¼Œå¦‚é£æ ¼ç­‰     |

##### extra_args å‚æ•°è¯´æ˜

| å‚æ•°å | ç±»å‹   | å¿…å¡« | è¯´æ˜                     |
| ------ | ------ | ---- | ------------------------ |
| style  | string | å¦   | è¯­éŸ³é£æ ¼è¦æ±‚ï¼ˆé¢„ç•™å‚æ•°ï¼‰ |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "full_text": "ä½ å¥½ï¼Œä¸–ç•Œï¼",
  "extra_args": {
    "style": "æ­£å¼"
  }
}
```

#### å“åº”ç»“æœ

å“åº”ä¸º WAV æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ï¼Œç›´æ¥ä»¥äºŒè¿›åˆ¶æµå½¢å¼è¿”å›ã€‚

å“åº”å¤´åŒ…å«ï¼š

- Content-Type: audio/wav
- Content-Disposition: é™„ä»¶å½¢å¼ï¼ŒåŒ…å«æ–‡ä»¶å

#### å“åº”ç¤ºä¾‹

è¿”å›ä¸€ä¸ª WAV æ ¼å¼çš„éŸ³é¢‘æ–‡ä»¶ï¼Œå¯ç›´æ¥æ’­æ”¾æˆ–ä¸‹è½½ã€‚

### 8. å•è¯è®°å½•æ¥å£

#### æ¥å£è¯´æ˜

ç”¨äºè®°å½•ç”¨æˆ·ç¿»è¯‘è¿‡çš„å•è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å¥å­æ‹†åˆ†æˆå•è¯å¹¶è¿‡æ»¤æ‰äººåã€åœ°åã€ç‰¹æ®Šå•è¯ç­‰ï¼Œåªè®°å½•æ™®é€šçš„æ—¥å¸¸è¯æ±‡ã€‚

#### æ¥å£åœ°å€

```
POST /word/record
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å          | ç±»å‹   | å¿…å¡« | è¯´æ˜                                |
| --------------- | ------ | ---- | ----------------------------------- |
| user_id         | string | æ˜¯   | ç”¨æˆ·ID                              |
| text            | string | æ˜¯   | è¦å¤„ç†çš„æ–‡æœ¬                        |
| target_language | string | å¦   | ç›®æ ‡è¯­è¨€ï¼Œé»˜è®¤ä¸º"ä¸­æ–‡"              |
| model_name      | string | å¦   | ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼Œé»˜è®¤ä¸º"qwen-turbo-latest" |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
  "text": "Hello world, how are you today?",
  "target_language": "ä¸­æ–‡",
  "model_name": "qwen-turbo-latest"
}
```

#### å“åº”ç»“æœ

| å‚æ•°å  | ç±»å‹   | è¯´æ˜         |
| ------- | ------ | ------------ |
| message | string | æ“ä½œæ¶ˆæ¯     |
| records | array  | è®°å½•çš„å•è¯åˆ—è¡¨ |

##### records å…ƒç´ è¯´æ˜

| å‚æ•°å          | ç±»å‹   | è¯´æ˜                                |
| --------------- | ------ | ----------------------------------- |
| id              | string | è®°å½•çš„å”¯ä¸€æ ‡è¯†ç¬¦                    |
| user_id         | string | ç”¨æˆ·ID                              |
| word            | string | è®°å½•çš„å•è¯                          |
| original_text   | string | åŸå§‹æ–‡æœ¬ï¼ˆå¥å­ï¼‰                    |
| translated_text | string | ç¿»è¯‘åçš„æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰                |
| target_language | string | ç›®æ ‡è¯­è¨€                            |
| model_name      | string | ä½¿ç”¨çš„ç¿»è¯‘æ¨¡å‹                      |
| created_at      | string | åˆ›å»ºæ—¶é—´                            |

#### å“åº”ç¤ºä¾‹

```json
{
  "message": "å•è¯è®°å½•æˆåŠŸ",
  "records": [
    {
      "id": "73424a02-cc65-468c-bedd-80e8d45fcc42",
      "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
      "word": "hello",
      "original_text": "Hello world, how are you today?",
      "translated_text": null,
      "target_language": "ä¸­æ–‡",
      "model_name": "qwen-turbo-latest",
      "created_at": "2025-08-19 17:02:03.683303"
    },
    {
      "id": "b69c15e6-ec6b-4afb-b120-675966ec92ff",
      "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
      "word": "world",
      "original_text": "Hello world, how are you today?",
      "translated_text": null,
      "target_language": "ä¸­æ–‡",
      "model_name": "qwen-turbo-latest",
      "created_at": "2025-08-19 17:02:04.104836"
    }
  ]
}
```

### 9. è·å–ç”¨æˆ·å•è¯è®°å½•æ¥å£

#### æ¥å£è¯´æ˜

è·å–æŒ‡å®šç”¨æˆ·çš„å•è¯è®°å½•åˆ—è¡¨

#### æ¥å£åœ°å€

```
GET /word/records/{user_id}
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å   | ç±»å‹ | å¿…å¡« | è¯´æ˜                                |
| -------- | ---- | ---- | ----------------------------------- |
| user_id  | string | æ˜¯   | ç”¨æˆ·IDï¼ˆè·¯å¾„å‚æ•°ï¼‰                  |
| limit    | int  | å¦   | é™åˆ¶è¿”å›æ•°é‡ï¼Œé»˜è®¤ä¸º100             |
| offset   | int  | å¦   | åç§»é‡ï¼Œé»˜è®¤ä¸º0                     |

#### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:8000/word/records/7c03eb20-4525-4480-ae36-ecef8013a814?limit=10&offset=0"
```

#### å“åº”ç»“æœ

å“åº”æ ¼å¼åŒå•è¯è®°å½•æ¥å£

#### å“åº”ç¤ºä¾‹

```json
{
  "message": "è·å–å•è¯è®°å½•æˆåŠŸ",
  "records": [
    {
      "id": "3880814c-1593-488f-803e-919f74c73256",
      "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
      "word": "today",
      "original_text": "Hello world, how are you today?",
      "translated_text": null,
      "target_language": "ä¸­æ–‡",
      "model_name": "qwen-turbo-latest",
      "created_at": "2025-08-19 17:02:05.788975"
    }
  ]
}
```

### 10. æœç´¢å•è¯è®°å½•æ¥å£

#### æ¥å£è¯´æ˜

æœç´¢ç”¨æˆ·çš„å•è¯è®°å½•ï¼Œæ”¯æŒæŒ‰å•è¯å’Œç›®æ ‡è¯­è¨€ç­›é€‰

#### æ¥å£åœ°å€

```
POST /word/search
```

#### è¯·æ±‚å‚æ•°

| å‚æ•°å          | ç±»å‹   | å¿…å¡« | è¯´æ˜                                |
| --------------- | ------ | ---- | ----------------------------------- |
| user_id         | string | æ˜¯   | ç”¨æˆ·ID                              |
| word            | string | å¦   | æœç´¢çš„å•è¯ï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰          |
| target_language | string | å¦   | ç›®æ ‡è¯­è¨€                            |

#### è¯·æ±‚ä½“ç¤ºä¾‹

```json
{
  "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
  "word": "hello",
  "target_language": "ä¸­æ–‡"
}
```

#### å“åº”ç»“æœ

å“åº”æ ¼å¼åŒå•è¯è®°å½•æ¥å£

#### å“åº”ç¤ºä¾‹

```json
{
  "message": "æœç´¢å•è¯è®°å½•æˆåŠŸ",
  "records": [
    {
      "id": "73424a02-cc65-468c-bedd-80e8d45fcc42",
      "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
      "word": "hello",
      "original_text": "Hello world, how are you today?",
      "translated_text": null,
      "target_language": "ä¸­æ–‡",
      "model_name": "qwen-turbo-latest",
      "created_at": "2025-08-19 17:02:03.683303"
    }
  ]
}
```

## å•è¯è®°å½•åŠŸèƒ½è¯´æ˜

### åŠŸèƒ½æ¦‚è¿°

å•è¯è®°å½•åŠŸèƒ½å…è®¸ç³»ç»Ÿè‡ªåŠ¨è®°å½•ç”¨æˆ·ç¿»è¯‘è¿‡çš„å•è¯ï¼Œå¹¶å°†å¥å­æ‹†åˆ†æˆå•è¯åå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚ç³»ç»Ÿä¼šè¿‡æ»¤æ‰äººåã€åœ°åã€ç‰¹æ®Šå•è¯ç­‰ï¼Œåªè®°å½•æ™®é€šçš„æ—¥å¸¸è¯æ±‡ã€‚

### æ•°æ®åº“è¡¨ç»“æ„

#### word_record è¡¨

```sql
CREATE TABLE word_record (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    word VARCHAR(100) NOT NULL,
    original_text TEXT NOT NULL,
    translated_text TEXT,
    target_language VARCHAR(10) NOT NULL,
    model_name VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, word, target_language)
);
```

å­—æ®µè¯´æ˜ï¼š
- `id`: è®°å½•çš„å”¯ä¸€æ ‡è¯†ç¬¦
- `user_id`: ç”¨æˆ·IDï¼Œå…³è”åˆ°usersè¡¨
- `word`: è®°å½•çš„å•è¯
- `original_text`: åŸå§‹æ–‡æœ¬ï¼ˆå¥å­ï¼‰
- `translated_text`: ç¿»è¯‘åçš„æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰
- `target_language`: ç›®æ ‡è¯­è¨€
- `model_name`: ä½¿ç”¨çš„ç¿»è¯‘æ¨¡å‹
- `created_at`: åˆ›å»ºæ—¶é—´

### å•è¯è¿‡æ»¤è§„åˆ™

ç³»ç»Ÿä½¿ç”¨ä¸¤å±‚è¿‡æ»¤æœºåˆ¶æ¥åˆ¤æ–­å•è¯æ˜¯å¦ä¸ºæ™®é€šå•è¯ï¼š

#### 1. åŸºæœ¬è¿‡æ»¤è§„åˆ™
- å•è¯é•¿åº¦ï¼š2-50ä¸ªå­—ç¬¦
- ä¸åŒ…å«æ•°å­—
- åªåŒ…å«å­—æ¯ã€è¿å­—ç¬¦å’Œæ’‡å·
- ä¸æ˜¯å…¨å¤§å†™ç¼©å†™ï¼ˆ3ä¸ªå­—ç¬¦ä»¥å†…ï¼‰
- ä¸ä»¥å¤§å†™å­—æ¯å¼€å¤´

#### 2. AIæ™ºèƒ½åˆ¤æ–­
ä½¿ç”¨å¤§æ¨¡å‹åˆ¤æ–­å•è¯æ˜¯å¦ä¸ºæ™®é€šå•è¯ï¼Œæ’é™¤ä»¥ä¸‹ç±»å‹ï¼š
- äººåï¼šJohn, Mary, Smithç­‰
- åœ°åï¼šLondon, Paris, Beijingç­‰
- å“ç‰Œåï¼šApple, Nike, Coca-Colaç­‰
- ä¸“ä¸šæœ¯è¯­ï¼šalgorithm, photosynthesisç­‰
- ç¼©å†™ï¼šUSA, DNA, CEOç­‰
- ç½‘ç»œç”¨è¯­ï¼šLOL, OMGç­‰

### ç¿»è¯‘æ—¶è‡ªåŠ¨è®°å½•

åœ¨ç¿»è¯‘æ¥å£ä¸­ï¼Œå¦‚æœæä¾›äº†`user_id`å‚æ•°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•ç¿»è¯‘æ–‡æœ¬ä¸­çš„å•è¯ï¼š

```json
{
  "target": "ä¸­æ–‡",
  "segments": [
    {
      "id": "1",
      "text": "Hello world, how are you today?",
      "model": "qwen-turbo-latest"
    }
  ],
  "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814"
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### 1. è®°å½•å•è¯

```bash
curl -X POST "http://localhost:8000/word/record" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814",
    "text": "Hello world, how are you today?",
    "target_language": "ä¸­æ–‡",
    "model_name": "qwen-turbo-latest"
  }'
```

#### 2. ç¿»è¯‘æ—¶è‡ªåŠ¨è®°å½•

```bash
curl -X POST "http://localhost:8000/translate" \
  -H "Content-Type: application/json" \
  -d '{
    "target": "ä¸­æ–‡",
    "segments": [
      {
        "id": "1",
        "text": "Hello world, how are you today?",
        "model": "qwen-turbo-latest"
      }
    ],
    "user_id": "7c03eb20-4525-4480-ae36-ecef8013a814"
  }'
```

#### 3. è·å–å•è¯è®°å½•

```bash
curl -X GET "http://localhost:8000/word/records/7c03eb20-4525-4480-ae36-ecef8013a814?limit=10&offset=0"
```

### æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
2. éœ€è¦é…ç½®ç›¸åº”çš„å¤§æ¨¡å‹APIå¯†é’¥
3. å•è¯è®°å½•åŠŸèƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šå½±å“ç¿»è¯‘æ€§èƒ½
4. å¦‚æœAIåˆ¤æ–­å¤±è´¥ï¼Œç³»ç»Ÿä¼šé»˜è®¤è®¤ä¸ºæ˜¯æ™®é€šå•è¯
5. åŒä¸€ç”¨æˆ·å¯¹åŒä¸€å•è¯åœ¨åŒä¸€ç›®æ ‡è¯­è¨€ä¸‹çš„è®°å½•ä¼šæ›´æ–°è€Œä¸æ˜¯é‡å¤åˆ›å»º

### é”™è¯¯å¤„ç†

- å¦‚æœæ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œä¼šè®°å½•é”™è¯¯æ—¥å¿—ä½†ä¸å½±å“ç¿»è¯‘åŠŸèƒ½
- å¦‚æœAIåˆ¤æ–­å¤±è´¥ï¼Œä¼šè®°å½•è­¦å‘Šæ—¥å¿—å¹¶é»˜è®¤è®¤ä¸ºæ˜¯æ™®é€šå•è¯
- æ‰€æœ‰é”™è¯¯éƒ½ä¼šåœ¨æ—¥å¿—ä¸­è®°å½•è¯¦ç»†ä¿¡æ¯
